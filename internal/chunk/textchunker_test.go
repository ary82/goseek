package chunk_test

import (
	"context"
	"testing"

	"github.com/ary82/goseek/internal/chunk"
)

func TestTokenChunker_Chunk(t *testing.T) {
	tests := []struct {
		name    string
		content string
		wantErr bool
	}{
		{
			name:    "test chunker",
			content: CONTENT,
			wantErr: false,
		},
	}
	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			// TODO: construct the receiver type.
			tc := &chunk.TokenChunker{
				Maxsize:      1024,
				Minsize:      256,
				ChunkOverlap: 0.1,
			}
			got, gotErr := tc.Chunk(context.Background(), tt.content)
			if gotErr != nil {
				if !tt.wantErr {
					t.Errorf("Chunk() failed: %v", gotErr)
				}
				return
			}
			if tt.wantErr {
				t.Fatal("Chunk() succeeded unexpectedly")
			}
			for i, v := range got {
				t.Logf("Chunk %v: %v", i, v.Content)
				t.Logf("\n")
			}
		})
	}
}

const CONTENT = `Skip to main content <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KVQ4F9QJ" height="0" width="0" style="display:none;visibility:hidden"></iframe> PNNL About News & Media Careers Events Search Search Research Scientific Discovery Biology Chemical Biology Computational Biology Ecosystem Science Human Health Cancer Biology Exposure Science & Pathogen Biology Integrative Omics Advanced Metabolomics Chemical Biology Mass Spectrometry-Based Measurement Technologies Spatial and Single-Cell Proteomics Structural Biology Microbiome Science Biofuels & Bioproducts Human Microbiome Soil Microbiome Synthetic Biology Predictive Phenomics Chemistry Computational Chemistry Chemical Separations Chemical Physics Catalysis Earth & Coastal Sciences Global Change Atmospheric Science Atmospheric Aerosols Human-Earth System Interactions Modeling Earth Systems Coastal Science Ecosystem Science Subsurface Science Terrestrial Aquatics Materials Sciences Materials in Extreme Environments Precision Materials by Design Science of Interfaces Solid Phase Processing Cold Spray Friction Stir Welding & Processing ShAPE Nuclear & Particle Physics Dark Matter Flavor Physics Fusion Energy Science Neutrino Physics Quantum Information Sciences Energy Resiliency Electric Grid Modernization Emergency Response Grid Analytics AGM Program Tools and Capabilities Grid Architecture Grid Cybersecurity Grid Energy Storage Grid Resilience and Decarbonization Earth System Modeling Energy System Modeling Transmission Distribution Energy Efficiency Appliance and Equipment Standards Building Energy Codes Building Technologies Advanced Building Controls Advanced Lighting Building-Grid Integration Building and Grid Modeling Commercial Buildings Federal Buildings Federal Performance Optimization Resilience and Security Grid Resilience and Decarbonization Residential Buildings Building America Solution Center Energy Efficient Technology Integration Home Energy Score Energy Efficient Technology Integration Energy Storage Electrochemical Energy Storage Flexible Loads and Generation Grid Integration, Controls, and Architecture Regulation, Policy, and Valuation Science Supporting Energy Storage Chemical Energy Storage Environmental Management Waste Processing Radiation Measurement Environmental Remediation Fossil Energy Subsurface Energy Systems Carbon Management Carbon Capture Carbon Storage Carbon Utilization Advanced Hydrocarbon Conversion Nuclear Energy Fuel Cycle Research Advanced Reactors Reactor Operations Reactor Licensing Renewable Energy Solar Energy Wind Energy Wind Resource Characterization Wildlife and Wind Community Values and Ocean Co-Use Wind Systems Integration Wind Data Management Distributed Wind Marine Energy Environmental Monitoring for Marine Energy Marine Biofouling and Corrosion Marine Energy Resource Characterization Testing for Marine Energy The Blue Economy Hydropower Environmental Performance of Hydropower Hydropower Cybersecurity and Digitalization Hydropower and the Electric Grid Materials Science for Hydropower Pumped Storage Hydropower Water + Hydropower Planning Grid Integration of Renewable Energy Geothermal Energy Transportation Bioenergy Technologies Algal Biofuels Aviation Biofuels Waste-to-Energy and Products Hydrogen & Fuel Cells Vehicle Technologies Emission Control Energy-Efficient Mobility Systems Lightweight Materials Vehicle Electrification Vehicle Grid Integration National Security Chemical & Biothreat Signatures Contraband Detection Pathogen Science & Detection Explosives Detection Threat-Agnostic Biodefense Cybersecurity Discovery and Insight Proactive Defense Trusted Systems Nuclear Material Science Nuclear Nonproliferation Radiological & Nuclear Detection Nuclear Forensics Ultra-Sensitive Nuclear Measurements Nuclear Explosion Monitoring Global Nuclear & Radiological Security Stakeholder Engagement Disaster Recovery Global Collaborations Legislative and Regulatory Analysis Technical Training Systems Integration & Deployment Additive Manufacturing Deployed Technologies Rapid Prototyping Systems Engineering Threat Analysis Advanced Wireless Security 5G Security RF Signal Detection & Exploitation Grid Resilience and Decarbonization Internet of Things Maritime Security Millimeter Wave Mission Risk and Resilience Data Science & Computing Artificial Intelligence Graph and Data Analytics Software Engineering Computational Mathematics & Statistics Future Computing Technologies Adaptive Autonomous Systems Visual Analytics Publications & Reports Featured Research People Inventors Lab Leadership Lab Fellows Staff Accomplishments Partner with PNNL Education Undergraduate Students Graduate Students Post-graduate Students University Faculty University Partnerships K-12 Educators and Students STEM Education STEM Workforce Development STEM Outreach Meet the Team Internships Community Regional Impact Philanthropy Volunteering Industry Available Technologies Industry Industry Partnerships Licensing & Technology Transfer Entrepreneurial Leave Visual Intellectual Property Search (VIPS) Facilities & Centers All Facilities Atmospheric Radiation Measurement User Facility Electricity Infrastructure Operations Center Energy Sciences Center Environmental Molecular Sciences Laboratory Grid Storage Launchpad Institute for Integrated Catalysis Interdiction Technology and Integration Laboratory PNNL Portland Research Center PNNL Seattle Research Center PNNL-Sequim (Marine and Coastal Research) Radiochemical Processing Laboratory Shallow Underground Laboratory Breadcrumb Home Explainer Articles Nanomaterials What are nanomaterials? Nanomaterials are a class of materials where the individual units have at least one dimension below 100 nanometers. They can be made of any element and are commonly classed into organic (carbon based), inorganic (non-carbon based), and hybrid (which combine the two) materials. They appear in nature, with nanostructures giving butterfly wings their iridescence and gecko’s footpads their sticking power. Nanomaterials can be discreet structures, like nanoparticles or nanotubes, or patterned structures attached to a surface. Nanoscale arrangement of sulfur atoms on copper. (Image by Brookhaven National Laboratory | Flickr.com)Nanomaterials have attracted significant research interest because of the unique properties that emerge at the nanometer scale. These properties range from high surface area for chemical reactions, to unique surface structures, to different ways of interacting with light. The precise nature of nanomaterial behavior depends on the specific material. Developing an understanding of how to create and tune nanomaterials enables scientists to take advantage of their unique properties for a wide range of applications. A variety of techniques exist for generating nanomaterials, which include solution-based synthesis, vapor deposition techniques, and electrolysis. Finding ways to controllably and efficiently produce nanomaterials with atomically precise control remains an ongoing challenge in the field. Nanomaterials are a broad class of materials, leading to equally broad potential applications. Nanomaterials are already present in commercial products, from nanocrystals in high-end displays to carbon nanotubes in bicycle components. Researchers are currently investigating nanomaterials for use in solar panels, as targeted drug delivery systems, and as catalysts for a wide range of chemical reactions. The ability to tailor nanomaterials size and properties to suit a specific application makes nanomaterials an exciting and powerful area of research. Nanomaterials throughout history Humans have unknowingly used nanomaterials for millennia, particularly in glassmaking. The color in the glass of the 4th century Lycurgus Cup has been attributed to small amounts of gold and silver nanoparticles embedded in the glass. Michael Faraday hypothesized the existence of and successfully synthesized gold nanoparticles in the 1850s, but confirmation of the exact nature of the particles only occurred after the development of electron microscopes. Richard Feynman’s 1959 lecture, “There’s Plenty of Room at the Bottom,” marked a call toward the development of nanoscience and has become an intellectual touchstone in the decades since its publication. The advent of electron microscopes in the 20th century, particularly the higher microscopes developed in the 1980s, enabled the detailed study of nanomaterials and accelerated research. The field has expanded rapidly because of the swift increases in available experimental techniques for studying nanomaterials. Nanomaterials’ importance and applications Nanomaterials have increased in importance as the field has progressed, with research technology enabling increasingly precise study of nanoscale materials. Growth in scientists’ understanding of synthesis techniques have broadened the scope of nanomaterials that exist today. This has also resulted in increased quality of nanomaterials, creating ever larger ensembles with identical sizes, shapes, and purity, all of which are important for potential applications. Much remains to be explored in the nanomaterials space. While nanostructures with simple shapes and compositions are common, research is moving toward developing routes to complex nanostructures. Creating nanomaterials with multiple components in complicated shapes with precise control over their composition remains a major research target. Given the breadth of potential nanomaterials, their applications are extremely wide ranging. A prominent current use of nanomaterials is in color filters for displays. Sufficiently small semiconductor nanoparticles emit wavelengths of light that are much more precise than traditional color filters when excited. By substituting these nanomaterials for traditional color filters, display manufacturers can create a wider range of pure colors in a display. These nanomaterials also have potential applications in lighting, converting higher-energy blue light from light-emitting diodes (LEDs) into warm light more suitable for indoor applications. An additional approach based on the electronic tunability of semiconductor nanomaterials is in photovoltaic devices, which convert light to electricity. Because many nanomaterials can be suspended in a solution, this dramatically increases the fabrication possibilities compared to bulk materials that must be grown via very high-temperature or vapor deposition processes. These nanomaterials can be printed on flexible backings to create lighter-weight devices for applications beyond rooftop or large solar farm installations. Yeast cells stained with fluorescent dyes. (Image by John B. Cliff, III | The Environmental Molecular Sciences Laboratory)Nanomaterials also have increasing relevance in medicine. For example, the outside of a nanoparticle can be functionalized to bind to a particular type of cell or cellular structure. They can then be used as dyes for imaging or for drug delivery, depending on the system and need. Nanomaterials also frequently have different toxicological concerns than bulk materials, and significant research has explored their safety for medical use. Nanomaterials have a very high surface area to volume ratio, meaning that a large proportion of their atoms are on the surface of the material. This presents significant advantages for applications like catalysis, because the active sites of catalysts all exist at the surface of the material. More surface area corresponds to more active sites, allowing for more efficient use of the same quantity of material. Some recent advances in solid-state catalysts have utilized nanostructured materials. Given the relatively recent advent of nanomaterials science as a field, the progress made toward understanding the fundamentals of how nanomaterials form and their potential applications has been swift. Nanomaterials and their applications will shape technology in ways both great and small. The benefits of nanomaterials The emergent properties of nanomaterials give them unique benefits not seen in either bulk, which are at larger scales, or molecular systems. A particular class of semiconductor nanoparticles known as quantum dots have size-tunable electronic properties, meaning the specific wavelengths of light they can absorb and emit are determined by their size. This allows scientists to precisely tune the color of a material by just changing its size, whereas other systems would require changing the material completely. Nanomaterials can be synthesized by a wide range of methods that present different advantages and disadvantages. While vapor deposition techniques can produce materials with extremely high purity and control, they require clean room facilities and expensive infrastructure. Another significant synthetic route to nanomaterials is solution-phase synthesis. These reactions require less-intensive setup and produce materials that can be further processed in solution, an advantage for many applications, but have historically lacked the extreme precision and purity of vapor-deposited materials. Nanostructured materials also have the advantage of a very high surface area to volume ratio. This is particularly important when features of interest, like active sites, are on the surface of a material. Having a large proportion of surface sites also allows materials to be used more efficiently for applications like catalysis and is particularly important for rare or expensive materials, such as the platinum catalysts used in hydrogen production. Nanomaterials can also work in concert with bulk materials or specific molecules to create complex systems for catalysis or environmental sensing. The multifaceted systems can harness the advantages of nanomaterials as well as the other components to produce previously inaccessible results. By combining materials with different properties, individual components can be tuned without changing concept or underlying structure. The potential for atomically precise synthesis of nanomaterials represents an exciting research direction. The realization of this level of control over synthesis would enable scientists to precisely target complex structures tuned to meet specific application needs, expanding the utility of individual types of nanomaterials. The limitations of nanomaterials Nanomaterials science is a relatively new discipline, which means limitations still must be overcome. Many synthetic challenges remain. Researchers are currently unable to consistently synthesize all nanomaterials with an atomically precise level of control. Several commonly used synthetic methods, including vapor deposition techniques, are extremely difficult to scale up and remain economically viable. This currently limits the industrial utility of many nanomaterials. Developing an understanding of the precise growth mechanisms of nanomaterials is also a challenge. Many techniques used for either molecular or bulk chemistry are unsuitable for acquiring high-quality data on nanomaterials. This makes obtaining detailed information on how nanomaterials form difficult because it requires developing new techniques or modifications of existing techniques. The ability to study nanomaterials remains limited by the characterization techniques available. The increase in electron microscope resolution from aberration correction has enabled researchers to obtain images with atomic-level resolution. However, this high level of precision has not been applied to the more complex process of in situ imaging. In situ electron microscopy, which allows researchers to watch nanomaterial formation in real-time, is a growing field with ongoing work to increase resolution and broaden the range of systems where it can be applied. Nanomaterials are challenging to model computationally because they are too large for many molecular methods to represent effectively but too small for many bulk methods to model accurately. Computational scientists are currently working on finding methods that model nanomaterials with sufficiently high precision and low computational cost. Recent advances in nanomaterials Recently, nanomaterials have shifted toward higher levels of atomic precision. Early synthetic work was primarily focused on simple shapes and materials, exploring broad possibilities and fundamental understanding. Current work seeks to both refine and move beyond the fundamentals of nanomaterials science, developing an atomic-level understanding of material synthesis and seeking a wider range of applications. Attaining the desired atomic precision can take multiple pathways. Some research focuses on controlling the reactivity of the forming nanomaterials to tune their size and shape during synthesis. This creates specifically targeted nanomaterials with embedded functionality, but the processes are complex. Solution-phase nanomaterials synthesis involves numerous components that all interact, which makes discerning specific effects from a single change or molecule challenging. However, innovations in precursor molecules and an enhanced understanding of the mechanisms by which nanomaterials form have aided researchers in developing syntheses with highly controlled products. While these are not inherently generalizable or available for all desired nanomaterials, progress is ongoing. Another emerging area of study is the design and use of nanomaterials assemblies. These can be generated via oriented attachment, where the smaller nanomaterials fuse together in precise and predictable alignment, specific patterning on a substrate of interest, or chemical linkages between two different materials. Assemblies allow the properties of different materials to be combined as well as enable access to new, combined functions. For example, linking two different semiconducting nanomaterials can enhance their ability to transfer energy. This has potential applications in light emission and catalysis. Nanomaterials have increasing relevance for industrial applications. As initial challenges with scaling and synthesis continue to be solved, the utility of nanomaterials will only increase. Touted as next-generation materials for lighting, catalysis, and photovoltaic devices, nanomaterials have already made their way into high-end displays and the medical world. Nanomaterials at Pacific Northwest National Laboratory PNNL scientists pursue the science of synthesis and processing of nanoscale materials, aiming to gain atomic-level control of their structures and properties. Examples of nanomaterials synthesized at PNNL include sequence-defined polymers that mimic proteins and peptides; heterojunctions and multilayers of complex oxides that allow for control of optical, magnetic, and electrochemical properties; assemblies of nanoparticles that exhibit enhanced catalytic properties; nano-porous materials that adsorb and release chemicals on demand; and two-dimensional materials with unusual electronic properties that are promising for applications in quantum information sciences. The overarching goal of PNNL’s synthesis efforts is to develop a predictive understanding of the physical principles that connect atomic-scale interactions to the behavior of ensembles of atomic and molecular species. These behaviors, in turn, control the synthesis of hierarchical nanostructures. This understanding enables PNNL researchers to develop principles for the predictive synthesis of complex nanostructured materials with controlled dimensionality, architectures, and functionalities over multiple length scales. PNNL research aims to reveal the cause-and-effect relationships between atomic arrangements, including various types of defects, and the ability of materials to function, e.g., enhance the rates of chemical reactions, absorb and emit light, and generate electrical current. Scientists at PNNL have created a new family of nanotubes that are composed of peptide-like molecules called peptoids. These nanotubes start out as small droplets that come together to form a cell-membrane-like sheet. Then, the sheet folds at one end and zips closed into a tube. (Image by Nathan Johnson | Pacific Northwest National Laboratory)These efforts in the synthesis and processing of nanomaterials are supported by a broad range of in situ and ex situ microscopic and spectroscopic characterization techniques, atom probe tomography, computational modeling, and data analytics. The advanced microscopy capabilities at PNNL allow researchers to study nanomaterials in detail. PNNL has several aberration-corrected scanning transmission electron microscopes that provide atomic-level resolution of materials structures. In addition, in situ transmission electron microscopy and atomic force microscopy imaging allows researchers to observe how particles nucleate, grow, and assemble into hierarchical structures. Atom probe tomography allows scientists to construct three-dimensional compositional maps of the materials with sub-nanometer resolution. Theory and computational modeling can reveal experimentally unavailable mechanistic details of synthetic processes and examine the behavior of systems under conditions currently outside experimental capabilities. Specific examples of applications include the development of synthetic self-assembling systems, such as artificial membranes that mimic the hierarchical nature of biology, carry out high-level functions, and use fully synthetic components to create biomimetic membrane assemblies with efficient and tunable transport characteristics. Similarly, controlling atomic transport and electron transfer in atomically precise multilayer materials is critical to realizing novel computing paradigms as well as efficient energy conversion and storage applications. Finally, materials with controllable pores, inter-pore channels, and chemical interactions are promising for advancing separation technologies for applications ranging from water purification to the isolation of gases. PNNL research on nanomaterials provides insight into the complex relationships between material building blocks, synthesis conditions, and the resulting structure, properties, and functions that underpin the development of novel energy technologies. Facilities Environmental Molecular Sciences Laboratory Advanced Battery Facility Redox Flow Battery Laboratories Shallow Underground Laboratory Bioproducts, Sciences, and Engineering Laboratory Center for Molecular Electrocatalysis Interfacial Dynamics in Radioactive Environments and Materials Center for the Science of Synthesis Across Scales Related Divisions Physical Sciences Division Research topics Materials Sciences Scientific Discovery PNNL Get in Touch Contact Careers Doing Business Environmental Reports Security & Privacy Vulnerability Disclosure Policy Research Scientific Discovery Energy Resiliency National Security Subscribe to PNNL News Department of Energy Logo Battelle Logo Pacific Northwest National Laboratory (PNNL) is managed and operated by Battelle for the Department of Energy YouTube Facebook X (formerly Twitter) Instagram LinkedIn`
